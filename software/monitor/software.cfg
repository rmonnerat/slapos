[buildout]

extends =
  buildout.hash.cfg
  ../../component/pycurl/buildout.cfg
  ../../component/python-cryptography/buildout.cfg
  ../../component/wget/buildout.cfg
  ../../stack/monitor/buildout.cfg
  ../../stack/slapos-dev.cfg

parts += 
  wget
  slapos-cookbook
  json-test-template
  template
  template-monitor-edgetest
  template-monitor

[template]
recipe = slapos.recipe.template 
url = ${:_profile_base_location_}/instance.cfg
output = ${buildout:directory}/template.cfg
mode = 0644

[template-monitor]
recipe = slapos.recipe.build:download 
url = ${:_profile_base_location_}/${:filename}
mode = 0644

[template-monitor-edgetest]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}
mode = 0644

[template-monitor-bot]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}
mode = 0644

[json-test-template]
recipe = slapos.recipe.build:download
url = ${:_profile_base_location_}/${:filename}
mode = 0644

[extra-eggs]
<= monitor-eggs
interpreter = pythonwitheggs
eggs +=
  ${lxml-python:egg}
  ${pycurl:egg}
  ${python-cryptography:egg}
  slapos.toolbox
  slapos.core

scripts =
  onetimedownload
  monitor.bootstrap
  monitor.genstatus
  monitor.configwrite
  check-computer-memory

[monitor-eggs]
eggs += 
  slapos.cookbook
  slapos.recipe.cmmi
  hexagonit.recipe.download
  plone.recipe.command

[versions]
slapos.recipe.template = 4.3
